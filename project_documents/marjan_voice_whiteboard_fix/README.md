# خطة إصلاح وتحسين تكامل مرجان مع السبورة الذكية

## ملخص المشكلة
المساعد الذكي "مرجان" لا يستطيع التحكم في السبورة، وواجهة التحكم الخاصة بالسبورة تعاني من مشاكل في التصميم (أزرار كبيرة).

---

## قائمة المهام التنفيذية المفصلة (To-Do List)

### المرحلة 1: التحليل والتحقيق (Analysis & Investigation)

- [ ] **T01.01: تحليل مكونات السبورة ومرجان**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `src/components/MarjanTeacher.tsx`, `src/components/MarjanWhiteboard.tsx`, `src/lib/marjan-whiteboard.ts`, `src/lib/whiteboard-functions.ts`
  - **الهدف:** فهم كيفية عمل المكونات الحالية، وكيفية تدفق البيانات بينها، وتحديد نقاط الضعف في التكامل الحالي.
  - **المستندات المرجعية:** لا يوجد.

- [ ] **T01.02: تحليل واجهة المستخدم وأسلوب التصميم**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `src/components/MarjanWhiteboard.tsx` والملفات المرتبطة بـ `globals.css` أو Tailwind CSS.
  - **الهدف:** تحديد الأسباب التي تؤدي إلى ظهور أزرار التحكم بحجم كبير وتحديد أفضل طريقة لإصلاحها.
  - **المستندات المرجعية:** لا يوجد.

### المرحلة 2: إصلاح واجهة المستخدم (UI Fix)

- [ ] **T02.01: اقتراح وتنفيذ تحسينات واجهة المستخدم**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `src/components/MarjanWhiteboard.tsx`
  - **الهدف:** تعديل تصميم أزرار التحكم لتكون أصغر حجمًا وأكثر أناقة، ربما باستخدام أيقونات Lucide React وتجميعها في شريط أدوات مدمج.
  - **الاعتماديات:** T01.02

### المرحلة 3: الإصلاح الوظيفي (Functional Fix)

- [ ] **T03.01: تصميم جسر التحكم (Control Bridge)**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `src/lib/marjan-whiteboard.ts`, `src/lib/whiteboard-functions.ts`
  - **الهدف:** تصميم آلية واضحة تمكّن "مرجان" من إرسال أوامر محددة إلى السبورة (مثل `drawCircle`, `writeText`). يتضمن ذلك تحديد شكل الأوامر التي سيولدها نموذج اللغة الكبيرة.
  - **الاعتماديات:** T01.01

- [ ] **T03.02: تنفيذ وظائف التحكم في السبورة**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `src/lib/whiteboard-functions.ts`
  - **الهدف:** التأكد من وجود وظائف (functions) قابلة للتصدير وموثوقة في هذا الملف لتنفيذ جميع الإجراءات المطلوبة على السبورة (الرسم، الكتابة، المسح، إلخ).
  - **الاعتماديات:** T03.01

- [ ] **T03.03: ربط "مرجان" بوظائف التحكم**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `src/lib/marjan-whiteboard.ts`, `src/components/MarjanTeacher.tsx`
  - **الهدف:** تعديل منطق "مرجان" ليقوم بتحليل استجابات نموذج اللغة الكبيرة، واستخراج الأوامر الموجهة للسبورة، واستدعاء الوظائف المناسبة من `whiteboard-functions.ts`.
  - **الاعتماديات:** T03.02

### المرحلة 4: التوثيق والمراجعة

- [ ] **T04.01: توثيق التغييرات**
  - **الحالة:** قيد الانتظار
  - **المكونات:** إنشاء ملفات `.readme.md` للملفات التي تم تعديلها بشكل كبير.
  - **الهدف:** شرح التغييرات التي تم إجراؤها على كل ملف، وفقًا للمنهجية المعتمدة.
  - **الاعتماديات:** T02.01, T03.03

- [ ] **T04.02: كتابة تقرير الإنجاز**
  - **الحالة:** قيد الانتظار
  - **المكونات:** `project_documents/marjan_voice_whiteboard_fix/completion_report.md`
  - **الهدف:** تقديم ملخص نهائي للعمل الذي تم إنجازه والمشاكل التي تم حلها.
  - **الاعتماديات:** T04.01
