# مخطط قاعدة البيانات الأولي المقترح لمشروع EduSpark

هذا المستند يقدم مخططًا أوليًا لقاعدة البيانات بناءً على المتطلبات الأولية. سيتم تفصيل هذا المخطط لاحقًا في ملف `db_schema_detailed.md` ليشمل العلاقات، أنواع البيانات، والقيود بشكل كامل.

## 1. الكيانات والجداول المقترحة:

### `User`

*   **الغرض:** تخزين معلومات المستخدمين (الطلاب والمسؤولين).
*   **الحقول الأولية:**
    *   `id`: معرف فريد للمستخدم (Primary Key).
    *   `name`: اسم المستخدم.
    *   `email`: البريد الإلكتروني للمستخدم (Unique).
    *   `password`: كلمة المرور المجزأة (Hashed Password).
    *   `role`: دور المستخدم (مثال: `STUDENT`, `ADMIN`).
    *   `createdAt`: تاريخ ووقت إنشاء السجل.
    *   `updatedAt`: تاريخ ووقت آخر تحديث للسجل.

### `Course`

*   **الغرض:** تخزين معلومات الدورات التعليمية.
*   **الحقول الأولية:**
    *   `id`: معرف فريد للدورة (Primary Key).
    *   `title`: عنوان الدورة.
    *   `description`: وصف موجز للدورة.
    *   `published`: حالة النشر (منطقية: `true`/`false`).
    *   `authorId`: معرف المستخدم الذي أنشأ الدورة (Foreign Key إلى `User.id`).
    *   `createdAt`: تاريخ ووقت إنشاء السجل.
    *   `updatedAt`: تاريخ ووقت آخر تحديث للسجل.

### `Lesson`

*   **الغرض:** تخزين معلومات الدروس داخل الدورات.
*   **الحقول الأولية:**
    *   `id`: معرف فريد للدرس (Primary Key).
    *   `title`: عنوان الدرس.
    *   `content`: محتوى الدرس (يمكن أن يكون نصًا غنيًا بتنسيق JSON أو نص عادي).
    *   `courseId`: معرف الدورة التي ينتمي إليها الدرس (Foreign Key إلى `Course.id`).
    *   `order`: ترتيب الدرس داخل الدورة.
    *   `createdAt`: تاريخ ووقت إنشاء السجل.
    *   `updatedAt`: تاريخ ووقت آخر تحديث للسجل.

### `Enrollment`

*   **الغرض:** ربط الطلاب بالدورات التي التحقوا بها وتتبع تقدمهم.
*   **الحقول الأولية:**
    *   `userId`: معرف الطالب (Foreign Key إلى `User.id`).
    *   `courseId`: معرف الدورة (Foreign Key إلى `Course.id`).
    *   `enrolledAt`: تاريخ ووقت الالتحاق بالدورة.
    *   `progress`: حقل لتتبع التقدم (مثال: نسبة مئوية، أو قائمة بالدروس المكتملة).
    *   (مفتاح مركب: `userId`, `courseId`).

### `LLMInteractionLog`

*   **الغرض:** تسجيل تفاعلات الطلاب مع نماذج LLM.
*   **الحقول الأولية:**
    *   `id`: معرف فريد للسجل (Primary Key).
    *   `userId`: معرف المستخدم الذي أجرى التفاعل (Foreign Key إلى `User.id`).
    *   `prompt`: النص الذي أرسله المستخدم إلى LLM.
    *   `response`: استجابة LLM.
    *   `lessonId`: (اختياري) معرف الدرس الذي تم التفاعل بخصوصه (Foreign Key إلى `Lesson.id`).
    *   `timestamp`: تاريخ ووقت التفاعل.
    *   `cost`: (اختياري) التكلفة التقديرية للتفاعل (إذا كانت API توفر هذه المعلومة).

## 2. ملاحظات أولية حول العلاقات:

*   `User` 1:N `Course` (المستخدم يمكن أن يكون مؤلفًا لعدة دورات).
*   `Course` 1:N `Lesson` (الدورة تحتوي على عدة دروس).
*   `User` N:M `Course` عبر جدول `Enrollment` (المستخدم يمكن أن يلتحق بعدة دورات، والدورة يمكن أن يلتحق بها عدة مستخدمين).
*   `User` 1:N `LLMInteractionLog` (المستخدم يمكن أن يقوم بعدة تفاعلات مع LLM).
*   `Lesson` 1:N `LLMInteractionLog` (الدرس يمكن أن يكون له عدة تفاعلات LLM مرتبطة به).

## 4. ملاحظات حول استخدام MySQL و XAMPP:
*   سيتم استخدام MySQL كقاعدة بيانات علائقية، مع إدارة عبر XAMPP.
*   يجب التأكد من تشغيل MySQL في XAMPP قبل البدء بتشغيل Prisma Migrations أو التطبيق.

## 3. مهام مستقبلية لتفصيل المخطط:

*   تحديد أنواع البيانات الدقيقة لكل حقل (مثال: `String`, `Int`, `DateTime`, `Boolean`).
*   تحديد القيود (Constraints) مثل `NOT NULL`, `DEFAULT VALUES`.
*   تحديد الفهارس (Indexes) لتحسين أداء الاستعلامات.
*   إضافة أي جداول إضافية مطلوبة للميزات المستقبلية (مثل `Quiz`, `Question`, `Answer`).
*   إنشاء مخطط Prisma الفعلي بناءً على هذا التفصيل.